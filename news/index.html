<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • epwshiftr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epwshiftr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3.9011</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/cmip6_dict.html">Manage CMIP6 CVs and Data Request</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ideas-lab-nus/epwshiftr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/ideas-lab-nus/epwshiftr/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="development version" id="epwshiftr-development-version">epwshiftr (development version)<a class="anchor" aria-label="anchor" href="#epwshiftr-development-version"></a></h2>
<div class="section level3">
<h3 id="major-changes-development-version">Major changes<a class="anchor" aria-label="anchor" href="#major-changes-development-version"></a></h3>
<ul><li>
<p><code><a href="../reference/match_coord.html">match_coord()</a></code> has been refactored to correct the calculation method of geographical distance. Previously, epwshiftr assumes that distance on longitude and latitude is the same which is not true. Now it uses a spheroid formula to calculate the tunnel distance (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/39" class="external-link">#39</a>). For details, please see <a href="https://en.wikipedia.org/wiki/Geographical_distance#Tunnel_distance" class="external-link">Tunnel Distance</a> . The structure of the returned <code>epw_cmip6_coord</code> object has also changed. The <code>coord</code> column in the <code>coord</code> <code>data.table</code> is also a <code>data.table</code> which contains 6 columns describing the matched coordinates:</p>
<ul><li>
<code>index</code>: the indices of matched coordinates</li>
<li>
<code>ind_lon</code>, <code>ind_lat</code>: The value indices of longitude or latitude in the NetCDF coordinate grids. These values are used to extract the corresponding variable values</li>
<li>
<code>lon</code>, <code>lat</code>: the actual longitude or latitude in the NetCDF coordinate grids</li>
<li>
<code>dist</code>: the distance in km between the coordinate values in NetCDF and input EPW</li>
</ul><p>Besides, the usage of the input <code>threshold</code> and <code>max_num</code> has been changed a little bit:</p>
<ul><li>
<code>threshold</code>: Due to the change in distance calculation, the meaning of the <code>threshold</code> input has been changed. Instead of directly being used to get the ‘closest’ grid points in NetCDF, the longitude and latitude threshold is only used to help exclude grid points that are definitely too far away from the target location. The default threshold, which is 1 degree for both longitude and latitude, is still reasonable for common use cases and is kept unchanged. Also <code>threshold</code> now can be set to <code>NULL</code>. In this case, the distances between the target location and all grid points will be calculated. But this may be only useful for rare cases.</li>
<li>
<code>max_num</code>: Now the value <code>max_num</code> is the key input to control how many grid points are to be matched. The points will always be ordered in descending order in terms of the distances.</li>
</ul></li>
<li><p>The <code>data</code> in the returned value of <code><a href="../reference/extract_data.html">extract_data()</a></code> has been updated to include a new column <code>dist</code> which gives the spherical distance in km between EPW location and grid coordinates (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/39" class="external-link">#39</a>).</p></li>
<li>
<p>The document on the return value structure for <code><a href="../reference/extract_data.html">extract_data()</a></code> and <code><a href="../reference/morphing_epw.html">morphing_epw()</a></code> has been fixed (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/29" class="external-link">#29</a>). And the column order for all metadata in the returned <code>data.table</code> from <code><a href="../reference/extract_data.html">extract_data()</a></code> and <code><a href="../reference/morphing_epw.html">morphing_epw()</a></code> are not consistent. The columns will always be in the order below (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/45" class="external-link">#45</a>):</p>
<ul><li><code>activity_drs</code></li>
<li><code>institution_id</code></li>
<li><code>source_id</code></li>
<li><code>experiment_id</code></li>
<li><code>member_id</code></li>
<li><code>table_id</code></li>
<li><code>lon</code></li>
<li><code>lat</code></li>
<li><code>dist</code></li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-development-version">New features<a class="anchor" aria-label="anchor" href="#new-features-development-version"></a></h3>
<ul><li>A new parameter <code>full</code> is added to <code><a href="../reference/future_epw.html">future_epw()</a></code>. When setting to <code>TRUE</code>, a <code>data.table</code> containing information about how the data are split by the <code>by</code> argument and also the generated future EPWs and their paths are returned (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/18" class="external-link">#18</a>).</li>
<li>Now <code><a href="../reference/summary_database.html">summary_database()</a></code> can append results to the previous scan and detect if any previously matched NetCDF files do not exist. It stores the metadata of those missing files as a new attribute <code>not_found</code> in the results. Warnings are issued if <code>warning</code> is set to <code>TRUE</code>. Also, a new parameter <code>miss</code> has been added to control how to manage those invalid entries. You can set it to <code>"keep"</code>, which is the default, to do nothing about it or <code>"overwrite"</code> to overwrite those entries based on the newly matched NetCDF files if possible (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/40" class="external-link">#40</a>).</li>
<li>
<code><a href="../reference/extract_data.html">extract_data()</a></code> now supports non-standard calendar, e.g. <code>360_day</code> (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/32" class="external-link">#32</a>).</li>
<li>A new parameter <code>warning</code> has been added in <code><a href="../reference/morphing_epw.html">morphing_epw()</a></code>. If set to <code>TRUE</code>, warnings will be issued for cases with input data less than a decade (10 years) . This is because using data that only covers a short period of time may not be able to capture the average of future climate (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/41" class="external-link">#41</a>).</li>
<li>Now epwshiftr is able to download, parse and store CMIP6 Controlled Vocabularies (CVs) and Data Request data using the newly introduced class <code>CMIP6Dict</code>. Please see <code><a href="../reference/CMIP6Dict.html">?CMIP6Dict</a></code> for details (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/53" class="external-link">#53</a>).</li>
<li>A new option <code>epwshiftr.threshold_alpha</code> has been added to set the threshold of the absolute value for alpha, i.e. monthly-mean fractional change when performing morphing operations. The default value is set to <code>3</code>. If the morphing methods are set <code>"stretch"</code> or <code>"combined"</code>, and the absolute alpha exceeds the threshold value, warnings are issued and the morphing method is fallbacked to <code>"shift"</code> to avoid unrealistic morphed values (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/54" class="external-link">#54</a>).</li>
<li>Now HDF5 format is supported (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/60" class="external-link">#60</a>).</li>
<li>Now <code>replica</code> can be <code>NULL</code> in <code><a href="../reference/esgf_query.html">esgf_query()</a></code> and <code><a href="../reference/init_cmip6_index.html">init_cmip6_index()</a></code>. In this case, both the master record and replicas are all returned (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/61" class="external-link">#61</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-development-version">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-development-version"></a></h3>
<ul><li>Fix the error in <code><a href="../reference/summary_database.html">summary_database()</a></code> when no NetCDF files are found in the input directory (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/25" class="external-link">#25</a>).</li>
<li>Fix the error about overwriting temporary EPW file when <code>epw</code> in <code><a href="../reference/match_coord.html">match_coord()</a></code> is a search string (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/25" class="external-link">#25</a>).</li>
<li>Now <code><a href="../reference/morphing_epw.html">morphing_epw()</a></code> can correctly fall back to use “Shift” method when any missing values are detected in maximum and minimum prediction values of climate variables (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/25" class="external-link">#25</a>).</li>
<li>Fix the wrong warning messages when <code>combined</code> method is used in <code><a href="../reference/morphing_epw.html">morphing_epw()</a></code> (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/25" class="external-link">#25</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="internal-refactor-development-version">Internal refactor<a class="anchor" aria-label="anchor" href="#internal-refactor-development-version"></a></h3>
<ul><li>
<code>fields</code> parameter is used to directly filter the ESGF query responses (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/66" class="external-link">#66</a>).</li></ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.3" id="epwshiftr-013">epwshiftr 0.1.3<small>2021-05-26</small><a class="anchor" aria-label="anchor" href="#epwshiftr-013"></a></h2>
<div class="section level3">
<h3 id="minor-changes-0-1-3">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-0-1-3"></a></h3>
<ul><li>Remove <code>LazyData</code> in <code>DESCRIPTION</code> (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/16" class="external-link">#16</a>).</li></ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.2" id="epwshiftr-012">epwshiftr 0.1.2<small>2021-02-15</small><a class="anchor" aria-label="anchor" href="#epwshiftr-012"></a></h2>
<div class="section level3">
<h3 id="new-features-0-1-2">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-2"></a></h3>
<ul><li>The type of morphing methods can be specified using the newly added <code>methods</code> argument in <code><a href="../reference/morphing_epw.html">morphing_epw()</a></code>.</li></ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-1-2">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-2"></a></h3>
<ul><li>
<code><a href="../reference/esgf_query.html">esgf_query()</a></code> can accept <code>NULL</code> <code>resolution</code> argument (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/12" class="external-link">#12</a>).</li>
<li>
<code>load_cimp6_index()</code> can be correctly load local CMIP6 output index file when <code>force</code> is <code>TRUE</code> (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/8" class="external-link">#8</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.1" id="epwshiftr-011">epwshiftr 0.1.1<small>2020-08-11</small><a class="anchor" aria-label="anchor" href="#epwshiftr-011"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-1-1">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-1-1"></a></h3>
<ul><li>
<code><a href="../reference/esgf_query.html">esgf_query()</a></code> will give an informative message when LLNL ESGF node is not available (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/3" class="external-link">#3</a>).</li>
<li>
<code><a href="../reference/extract_data.html">extract_data()</a></code> will automatically detect input NetCDF dimensions (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/6" class="external-link">#6</a>).</li>
<li>
<code><a href="../reference/summary_database.html">summary_database()</a></code> now will proceed when no matched found (<a href="https://github.com/ideas-lab-nus/epwshiftr/issues/6" class="external-link">#6</a>).</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.0" id="epwshiftr-010">epwshiftr 0.1.0<small>2020-07-07</small><a class="anchor" aria-label="anchor" href="#epwshiftr-010"></a></h2>
<ul><li>Initial CRAN version</li></ul></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/hongyuanjia" class="external-link">Hongyuan Jia</a>, <a href="https://github.com/adChong" class="external-link">Adrian Chong</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

