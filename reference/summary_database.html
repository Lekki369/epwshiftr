<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Summary CMIP6 model output file status — summary_database • epwshiftr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Summary CMIP6 model output file status — summary_database"><meta property="og:description" content="summary_database() scans the directory specified and returns a
data.table() containing summary information about all the CMIP6
files available against the output file index loaded using
load_cmip6_index()."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epwshiftr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3.9010</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/cmip6_dict.html">Manage CMIP6 CVs and Data Request</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ideas-lab-nus/epwshiftr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summary CMIP6 model output file status</h1>
    <small class="dont-index">Source: <a href="https://github.com/ideas-lab-nus/epwshiftr/blob/HEAD/R/netcdf.R" class="external-link"><code>R/netcdf.R</code></a></small>
    <div class="hidden name"><code>summary_database.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>summary_database()</code> scans the directory specified and returns a
<code>data.table()</code> containing summary information about all the CMIP6
files available against the output file index loaded using
<code><a href="load_cmip6_index.html">load_cmip6_index()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">summary_database</span><span class="op">(</span></span>
<span>  <span class="va">dir</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"activity"</span>, <span class="st">"experiment"</span>, <span class="st">"variant"</span>, <span class="st">"frequency"</span>, <span class="st">"variable"</span>, <span class="st">"source"</span>,</span>
<span>    <span class="st">"resolution"</span><span class="op">)</span>,</span>
<span>  mult <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"skip"</span>, <span class="st">"latest"</span><span class="op">)</span>,</span>
<span>  append <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  miss <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"keep"</span>, <span class="st">"overwrite"</span><span class="op">)</span>,</span>
<span>  recursive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  update <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  warning <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dir</dt>
<dd><p>A single string indcating the directory where CMIP6 model output
NetCDF files are stored.</p></dd>


<dt>by</dt>
<dd><p>The grouping column to summary the database status. Should be a
subeset of:</p><ul><li><p><code>"experiment"</code>: root experiment identifiers</p></li>
<li><p><code>"source"</code>: model identifiers</p></li>
<li><p><code>"variable"</code>: variable identifiers</p></li>
<li><p><code>"activity"</code>: activity identifiers</p></li>
<li><p><code>"frequency"</code>: sampling frequency</p></li>
<li><p><code>"variant"</code>: variant label</p></li>
<li><p><code>"resolution"</code>: approximate horizontal resolution</p></li>
</ul></dd>


<dt>mult</dt>
<dd><p>Actions when multiple files match a same case in the CMIP6
index. If <code>"latest"</code>, the file with latest modification time
will be used. If <code>"skip"</code>, all matched files will be skip and this
case will be kept as unmatched. Default: <code>"skip"</code>.</p></dd>


<dt>append</dt>
<dd><p>If <code>TRUE</code>, status of CMIP6 files will only be updated if they
are not found in previous summary. This is useful if CMIP6 files are
stored in different directories. Default: <code>FALSE</code>.</p></dd>


<dt>miss</dt>
<dd><p>Actions when matched files in the previous summary do not exist
when running current summary. Only applicable when <code>append</code> is set to
<code>TRUE</code>. If <code>"keep"</code>, the metadata for the missing output files will
be kept. If <code>"overwrite"</code>, existing metadata of those output will be
first removed from the output file index and overwriten based on the
newly matched files if possible. Default: <code>"keep"</code>.</p></dd>


<dt>recursive</dt>
<dd><p>If <code>TRUE</code>, scan recursively into directories. Default:
<code>FALSE</code>.</p></dd>


<dt>update</dt>
<dd><p>If <code>TRUE</code>, the output file index will be updated based
on the matched NetCDF files in specified directory. If <code>FALSE</code>, only
current loaded index will be updated, but the actual index
database file saved in <code><a href="get_data_dir.html">get_data_dir()</a></code> will remain unchanged.
Default: <code>FALSE</code>.</p></dd>


<dt>warning</dt>
<dd><p>If <code>TRUE</code>, warning messages will show when target files are
missing or multiple files match a same case. Default: <code>TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code> containing corresponding grouping
columns plus:</p><table class="table table"><tr><td>Column</td><td>Type</td><td>Description</td></tr><tr><td><code>datetime_start</code></td><td>POSIXct</td><td>Start date and time of simulation</td></tr><tr><td><code>datetime_end</code></td><td>POSIXct</td><td>End date and time of simulation</td></tr><tr><td><code>file_num</code></td><td>Integer</td><td>Total number of file per group</td></tr><tr><td><code>file_size</code></td><td>Units (Mbytes)</td><td>Approximate total size of file</td></tr><tr><td><code>dl_num</code></td><td>Integer</td><td>Total number of file downloaded</td></tr><tr><td><code>dl_percent</code></td><td>Units (%)</td><td>Total percentage of file downloaded</td></tr><tr><td><code>dl_size</code></td><td>Units (Mbytes)</td><td>Total size of file downloaded</td></tr></table><p>Also 2 extra <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code> are attached as <strong>attributes</strong>:</p><ul><li><p><code>not_found</code>: A <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code> that contains metadata for those
CMIP6 outputs that are listed in current CMIP6 output file index but the
existing file paths are not valid now and cannot be found in current
database.</p></li>
<li><p><code>not_matched</code>: A <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code> that contains metadata for
those CMIP6 output files that are found in current database but not listed
in current CMIP6 output file index.</p></li>
</ul><p>For the meaning of grouping columns, see <code><a href="init_cmip6_index.html">init_cmip6_index()</a></code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The database here can be any directory that stores the NetCDF files for CMIP6
GCMs. It can be also be the same as <code><a href="get_data_dir.html">get_data_dir()</a></code> where epwshiftr stores
the output file index, if you want to save the output file index and output
files in the same place.</p>
<p><code>summary_database()</code> uses the <code>tracking_id</code>, <code>datetime_start</code> and
<code>datetime_end</code> global attributes of each NetCDF file to match against the
output file index. So the names of NetCDF files do not necessarily follow the
CMIP6 file name encoding.</p>
<p><code>summary_database()</code> will append 5 columns in the CMIP6 ouput file index:</p><ul><li><p><code>file_path</code>: the full path of matched NetCDF file for every case.</p></li>
</ul><p><code>summary_database()</code> uses <a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply</a>
underneath to speed up the data processing if applicable. You can use your
preferable future backend to speed up data extraction in parallel. By default,
<code>summary_database()</code> uses <code><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">future::sequential</a></code> backend, which runs things in
sequential.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">summary_database</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">summary_database</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"experiment"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/hongyuanjia" class="external-link">Hongyuan Jia</a>, <a href="https://github.com/adChong" class="external-link">Adrian Chong</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

