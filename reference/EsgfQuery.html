<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Query CMIP6 data using ESGF search RESTful API — EsgfQuery • epwshiftr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Query CMIP6 data using ESGF search RESTful API — EsgfQuery"><meta property="og:description" content="The Earth System Grid Federation (ESGF) is an international collaboration for
the software that powers most global climate change research, notably
assessments by the Intergovernmental Panel on Climate Change (IPCC).
The ESGF search service exposes RESTful APIs that can be used by clients to
query the contents of the underlying search index, and return results
matching the given constraints. The documentation of the APIs can be found
using this link
EsgfQuery is the workhorse for dealing with ESGF search services."><meta property="og:image" content="/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">epwshiftr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3.9015</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/cmip6_dict.html">Manage CMIP6 CVs and Data Request</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ideas-lab-nus/epwshiftr" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Query CMIP6 data using ESGF search RESTful API</h1>
    <small class="dont-index">Source: <a href="https://github.com/ideas-lab-nus/epwshiftr/blob/HEAD/R/query.R" class="external-link"><code>R/query.R</code></a></small>
    <div class="hidden name"><code>EsgfQuery.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The Earth System Grid Federation (ESGF) is an international collaboration for
the software that powers most global climate change research, notably
assessments by the Intergovernmental Panel on Climate Change (IPCC).</p>
<p>The ESGF search service exposes RESTful APIs that can be used by clients to
query the contents of the underlying search index, and return results
matching the given constraints. The documentation of the APIs can be found
using this <a href="https://esgf.github.io/esg-search/ESGF_Search_RESTful_API.html" class="external-link">link</a></p>
<p><code>EsgfQuery</code> is the workhorse for dealing with ESGF search services.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">query_esgf</span><span class="op">(</span>host <span class="op">=</span> <span class="st">"https://esgf-node.llnl.gov/esg-search"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>host</dt>
<dd><p>The URL to the ESGF Search API service. This should be the URL of
the ESGF search service excluding the final endpoint name. Usually
this is <code>http://&lt;hostname&gt;/esg-search</code>. Default is set to the
<a href="http://esgf-node.llnl.gov" class="external-link">LLNL (Lawrence Livermore National Laboratory) Index Node</a>,
which is <code>"https://esgf-node.llnl.gov/esg-search"</code>.</p></dd>

</dl></div>
    <div id="esgfquery-object">
    <h2><code>EsgfQuery</code> object</h2>
    <p><code>query_esgf()</code> returns an <code>EsgfQuery</code> object, which is an <a href="https://r6.r-lib.org/reference/R6Class.html" class="external-link">R6</a>
object with quite a few methods that can be classified into 3 categories:</p><ul><li><p><strong>Value listing</strong>: methods to list all possible values of facets, shards,
etc.</p></li>
<li><p><strong>Parameter getter &amp; setter</strong>: methods to get the query parameter values or
set them before sending the actual query to the ESGF search services.</p></li>
<li><p><strong>Query responses</strong>: methods to collect results for the query response.</p></li>
</ul><div class="section">
<h3 id="value-listing">Value listing<a class="anchor" aria-label="anchor" href="#value-listing"></a></h3>


<p>When creating an <code>EsgfQuery</code> object, a
<a href="https://esgf.github.io/esg-search/ESGF_Search_RESTful_API.html#facet-listings" class="external-link">facet listing query</a>
is sent to the index node to get all available facets and shards for the
default project (CMIP6).
<code>EsgfQuery</code> object provides three value-listing methods to extract data from
the response of the facet listing query:</p><ul><li><p><a href="#method-EsgfQuery-list_all_facets"><code>EsgfQuery$list_all_facets()</code></a>:
List all available facet names.</p></li>
<li><p><a href="#method-EsgfQuery-list_all_shards"><code>EsgfQuery$list_all_shards()</code></a>:
List all available shards.</p></li>
<li><p><a href="#method-EsgfQuery-list_all_values"><code>EsgfQuery$list_all_values()</code></a>:
List all available values of a specific facet.</p></li>
</ul></div>

<div class="section">
<h3 id="parameter-getter-amp-setter">Parameter getter &amp; setter<a class="anchor" aria-label="anchor" href="#parameter-getter-amp-setter"></a></h3>


<p>The ESGF search services support a lot of parameters. The <code>EsgfQuery</code>
contains dedicated methods to set values for most of them, including:</p><ul><li><p>Most common keywords:
<a href="#method-EsgfQuery-facets"><code>facets</code></a>,
<a href="#method-EsgfQuery-offset"><code>offset</code></a>,
<a href="#method-EsgfQuery-limit"><code>limit</code></a>,
<a href="#method-EsgfQuery-fields"><code>fields</code></a>,
<a href="#method-EsgfQuery-type"><code>type</code></a>,
<a href="#method-EsgfQuery-replica"><code>replica</code></a>,
<a href="#method-EsgfQuery-latest"><code>latest</code></a>,
<a href="#method-EsgfQuery-distrib"><code>distrib</code></a>
and
<a href="#method-EsgfQuery-shards"><code>shards</code></a>.</p></li>
<li><p>Most common facets:
<a href="#method-EsgfQuery-project"><code>project</code></a>,
<a href="#method-EsgfQuery-activity_id"><code>activity_id</code></a>,
<a href="#method-EsgfQuery-experiment_id"><code>experiment_id</code></a>,
<a href="#method-EsgfQuery-source_id"><code>source_id</code></a>,
<a href="#method-EsgfQuery-variable_id"><code>variable_id</code></a>,
<a href="#method-EsgfQuery-frequency"><code>frequency</code></a>,
<a href="#method-EsgfQuery-variant_label"><code>variant_label</code></a>,
<a href="#method-EsgfQuery-nominal_resolution"><code>nominal_resolution</code></a>
and
<a href="#method-EsgfQuery-data_node"><code>data_node</code></a>.</p></li>
</ul><p>All methods act in a similar way:</p><ul><li><p>If input is given, the corresponding parameter is set and the updated
<code>EsgfQuery</code> object is returned.</p><ul><li><p>This makes it possible to chain different parameter setters, e.g.
<code>EsgfQuery$project("CMIP6")$frequency("day")$limit(1)</code> sets the parameter
<code>project</code>, <code>frequency</code> and <code>limit</code> sequentially.</p></li>
<li><p>For parameters that want character inputs, you can put a preceding <code>!</code> to
negate the constraints, e.g. <code>EsgfQuery$project(!"CMIP6")</code> searches for
all projects except for <code>CMIP6</code>.</p></li>
</ul></li>
<li><p>If no input is given, the current parameter value is returned. For example,
directly calling <code>EsgfQuery$project()</code> returns the current value of the
<code>project</code> parameter. The returned value can be two types:</p><ul><li><p><code>NULL</code>, i.e. there is no constraint on the corresponding parameter</p></li>
<li><p>An <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: The input values</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code> in the input</p></li>
<li><p><code>name</code>: The parameter name</p></li>
</ul></li>
</ul></li>
</ul><p>Despite methods for specific keywords and facets, you can specify arbitrary
query parameters using
<a href="#method-EsgfQuery-params"><code>EsgfQuery$params()</code></a> method. For
details on the usage, please see the
<a href="#method-EsgfQuery-params">documentation</a>.</p>
</div>

<div class="section">
<h3 id="query-responses">Query responses<a class="anchor" aria-label="anchor" href="#query-responses"></a></h3>


<p>The query is not sent unless related methods are called:</p><ul><li><p><a href="#method-EsgfQuery-count"><code>EsgfQuery$count()</code></a>: Count the total
number of records that match the query.</p><ul><li><p>You can return only the total number of matched record by calling
<code>EsgfQuery$count(facets = FALSE)</code></p></li>
<li><p>You can also count the matched records for specified facets, e.g.
<code>EsgfQuery$count(facets = c("source_id", "activity_id"))</code></p></li>
</ul></li>
<li><p><a href="#method-EsgfQuery-collect"><code>EsgfQuery$collect()</code></a>: Collect the
query results and format it into a <a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></p></li>
</ul></div>

<div class="section">
<h3 id="other-helpers">Other helpers<a class="anchor" aria-label="anchor" href="#other-helpers"></a></h3>


<p><code>EsgfQuery</code> object also provide several other helper functions:</p><ul><li><p><a href="#method-EsgfQuery-build_cache"><code>EsgfQuery$build_cache()</code></a>:
By default, <code>EsgfQuery$build_cache()</code> is called when initialize a new
<code>EsgfQuery</code> object. So in general, there is no need to call this
separately. Basically, <code>EsgfQuery$build_cahce()</code> sends a
<a href="https://esgf.github.io/esg-search/ESGF_Search_RESTful_API.html#facet-listings" class="external-link">facet listing query</a>
to the index node and stores the response internally. The response contains
all available facets and shards and is used as a source for validating user
input for parameter setters.</p></li>
<li><p><a href="#method-EsgfQuery-url"><code>EsgfQuery$url()</code></a>: Returns the actual
query URL or the wget script URL which can be used to download all files
matching the given constraints..</p></li>
<li><p><a href="#method-EsgfQuery-response"><code>EsgfQuery$response()</code></a>: Returns the
actual response of
<a href="#method-EsgfQuery-count"><code>EsgfQuery$count()</code></a> and
<a href="#method-EsgfQuery-collect"><code>EsgfQuery$collect()</code></a>. It is a named
list generated from the JSON response using <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">jsonlite::fromJSON()</a></code>.</p></li>
<li><p><a href="#method-EsgfQuery-print"><code>EsgfQuery$print()</code></a>: Print a summary
of the current <code>EsgfQuery</code> object including the host URL, the built time of
facet cache and all query parameters.</p></li>
</ul></div>

    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Hongyuan Jia</p>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-EsgfQuery-new"><code>EsgfQuery$new()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-build_cache"><code>EsgfQuery$build_cache()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-list_all_facets"><code>EsgfQuery$list_all_facets()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-list_all_shards"><code>EsgfQuery$list_all_shards()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-list_all_values"><code>EsgfQuery$list_all_values()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-project"><code>EsgfQuery$project()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-activity_id"><code>EsgfQuery$activity_id()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-experiment_id"><code>EsgfQuery$experiment_id()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-source_id"><code>EsgfQuery$source_id()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-variable_id"><code>EsgfQuery$variable_id()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-frequency"><code>EsgfQuery$frequency()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-variant_label"><code>EsgfQuery$variant_label()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-nominal_resolution"><code>EsgfQuery$nominal_resolution()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-data_node"><code>EsgfQuery$data_node()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-facets"><code>EsgfQuery$facets()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-fields"><code>EsgfQuery$fields()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-shards"><code>EsgfQuery$shards()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-replica"><code>EsgfQuery$replica()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-latest"><code>EsgfQuery$latest()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-type"><code>EsgfQuery$type()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-limit"><code>EsgfQuery$limit()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-offset"><code>EsgfQuery$offset()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-distrib"><code>EsgfQuery$distrib()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-params"><code>EsgfQuery$params()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-url"><code>EsgfQuery$url()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-count"><code>EsgfQuery$count()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-collect"><code>EsgfQuery$collect()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-response"><code>EsgfQuery$response()</code></a></p></li>
<li><p><a href="#method-EsgfQuery-print"><code>EsgfQuery$print()</code></a></p></li>
</ul></div><p></p><hr><a id="method-EsgfQuery-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new EsgfQuery object</p>
<p>When initialization, a
<a href="https://esgf.github.io/esg-search/ESGF_Search_RESTful_API.html#facet-listings" class="external-link">facet listing query</a>
is sent to the index node to get all available facets and shards.
This information will be used to validate inputs for <code>activity_id</code>,
<code>scource_id</code> facets and etc.</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/EsgfQuery.html">EsgfQuery</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>host <span class="op">=</span> <span class="st">"https://esgf-node.llnl.gov/esg-search"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>host</code></dt>
<dd><p>The URL to the ESGF Search API service. This should be
the URL of the ESGF search service excluding the final
endpoint name. Usually this is <code>http://&lt;hostname&gt;/esg-search</code>.
Default is to ses the <a href="http://esgf-node.llnl.gov" class="external-link">LLNL (Lawrence Livermore National Laboratory)</a> Index Node, which is
<code>"https://esgf-node.llnl.gov/esg-search"</code>.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>An <code>EsgfQuery</code> object.</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q &lt;- EsgfQuery$new(host = "https://esgf-node.llnl.gov/esg-search")
q
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-build_cache"></a><div class="section">
<h3 id="method-build-cache-">Method <code>build_cache()</code><a class="anchor" aria-label="anchor" href="#method-build-cache-"></a></h3>
<p>Build facet cache used for input validation</p>
<p>A facet cache is data that is fetched using a
<a href="https://esgf.github.io/esg-search/ESGF_Search_RESTful_API.html#facet-listings" class="external-link">facet listing query</a>
to the index node. It contains all available facets and shards that
can be used as parameter values within a specific project.</p>
<p>By default, <code>$build_cache()</code> is called when initialize a new
<code>EsgfQuery</code> object for the default project (CMIP6). So in general,
there is no need to call this method, unless that you want to
rebuild the cache again with different projects after calling
<a href="#method-EsgfQuery-project"><code>$project()</code></a>.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">build_cache</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>The modified <code>EsgfQuery</code> object.</p>
</div>
<div class="section">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$build_cache()
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-list_all_facets"></a><div class="section">
<h3 id="method-list-all-facets-">Method <code>list_all_facets()</code><a class="anchor" aria-label="anchor" href="#method-list-all-facets-"></a></h3>
<p>List all available facet names</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">list_all_facets</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>A character vector.</p>
</div>
<div class="section">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$list_all_facets()
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-list_all_shards"></a><div class="section">
<h3 id="method-list-all-shards-">Method <code>list_all_shards()</code><a class="anchor" aria-label="anchor" href="#method-list-all-shards-"></a></h3>
<p>List all available shards</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">list_all_shards</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>A character vector.</p>
</div>
<div class="section">
<h4 id="examples-3">Examples<a class="anchor" aria-label="anchor" href="#examples-3"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$list_all_shards()
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-list_all_values"></a><div class="section">
<h3 id="method-list-all-values-">Method <code>list_all_values()</code><a class="anchor" aria-label="anchor" href="#method-list-all-values-"></a></h3>
<p>List all available values of a specific facet</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">list_all_values</span><span class="op">(</span><span class="va">facet</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>facet</code></dt>
<dd><p>A single string giving the facet name.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>A named character vector.</p>
</div>
<div class="section">
<h4 id="examples-4">Examples<a class="anchor" aria-label="anchor" href="#examples-4"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$list_all_values()
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-project"></a><div class="section">
<h3 id="method-project-">Method <code>project()</code><a class="anchor" aria-label="anchor" href="#method-project-"></a></h3>
<p>Get or set the <code>project</code> facet parameter.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">project</span><span class="op">(</span>value <span class="op">=</span> <span class="st">"CMIP6"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>"CMIP6"</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$project(!c("CMIP5", "CMIP6"))</code> searches for all <code>project</code>s except for <code>CMIP5</code> and <code>CMIP6</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-5">Examples<a class="anchor" aria-label="anchor" href="#examples-5"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$project()

# set the parameter
q$project("CMIP6")

# negate the project constraints
q$project(!"CMIP6")

# remove the parameter
q$project(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-activity_id"></a><div class="section">
<h3 id="method-activity-id-">Method <code>activity_id()</code><a class="anchor" aria-label="anchor" href="#method-activity-id-"></a></h3>
<p>Get or set the <code>activity_id</code> facet parameter.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">activity_id</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$activity_id(!c("C4MIP", "GeoMIP"))</code> searches for all <code>activity_id</code>s except for <code>C4MIP</code> and <code>GeoMIP</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-6">Examples<a class="anchor" aria-label="anchor" href="#examples-6"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$activity_id()

# set the parameter
q$activity_id("ScenarioMIP")

# negate the constraints
q$activity_id(!c("CFMIP", "ScenarioMIP"))

# remove the parameter
q$activity_id(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-experiment_id"></a><div class="section">
<h3 id="method-experiment-id-">Method <code>experiment_id()</code><a class="anchor" aria-label="anchor" href="#method-experiment-id-"></a></h3>
<p>Get or set the <code>experiment_id</code> facet parameter.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">experiment_id</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$experiment_id(!c("ssp126", "ssp245"))</code> searches for all <code>experiment_id</code>s except for <code>ssp126</code> and <code>ssp245</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-7">Examples<a class="anchor" aria-label="anchor" href="#examples-7"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$experiment_id()

# set the parameter
q$experiment_id(c("ssp126", "ssp585"))

# negate the constraints
q$experiment_id(!c("ssp126", "ssp585"))

# remove the parameter
q$experiment_id(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-source_id"></a><div class="section">
<h3 id="method-source-id-">Method <code>source_id()</code><a class="anchor" aria-label="anchor" href="#method-source-id-"></a></h3>
<p>Get or set the <code>source_id</code> facet parameter.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">source_id</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$source_id(!c("CESM2", "CESM2-FV2"))</code> searches for all <code>source_id</code>s except for <code>CESM2</code> and <code>CESM2-FV2</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-8">Returns<a class="anchor" aria-label="anchor" href="#returns-8"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-8">Examples<a class="anchor" aria-label="anchor" href="#examples-8"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$source_id()

# set the parameter
q$source_id(c("BCC-CSM2-MR", "CESM2"))

# negate the constraints
q$source_id(!c("BCC-CSM2-MR", "CESM2"))

# remove the parameter
q$source_id(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-variable_id"></a><div class="section">
<h3 id="method-variable-id-">Method <code>variable_id()</code><a class="anchor" aria-label="anchor" href="#method-variable-id-"></a></h3>
<p>Get or set the <code>variable_id</code> facet parameter.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">variable_id</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$variable_id(!c("tas", "pr"))</code> searches for all <code>variable_id</code>s except for <code>tas</code> and <code>pr</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-9">Returns<a class="anchor" aria-label="anchor" href="#returns-9"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-9">Examples<a class="anchor" aria-label="anchor" href="#examples-9"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$variable_id()

# set the parameter
q$variable_id(c("tas", "pr"))

# negate the constraints
q$variable_id(!c("tas", "pr"))

# remove the parameter
q$variable_id(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-frequency"></a><div class="section">
<h3 id="method-frequency-">Method <code><a href="https://rdrr.io/r/stats/time.html" class="external-link">frequency()</a></code><a class="anchor" aria-label="anchor" href="#method-frequency-"></a></h3>
<p>Get or set the <code>frequency</code> facet parameter.</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">frequency</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$frequency(!c("day", "mon"))</code> searches for all <code>frequency</code>s except for <code>day</code> and <code>mon</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-10">Returns<a class="anchor" aria-label="anchor" href="#returns-10"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-10">Examples<a class="anchor" aria-label="anchor" href="#examples-10"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$frequency()

# set the parameter
q$frequency(c("1hr", "day"))

# negate the constraints
q$frequency(!c("1hr", "day"))

# remove the parameter
q$frequency(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-variant_label"></a><div class="section">
<h3 id="method-variant-label-">Method <code>variant_label()</code><a class="anchor" aria-label="anchor" href="#method-variant-label-"></a></h3>
<p>Get or set the <code>variant_label</code> facet parameter.</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">variant_label</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$variant_label(!c("r1i1p1f1", "r2i1p1f1"))</code> searches for all <code>variant_label</code>s except for <code>r1i1p1f1</code> and <code>r2i1p1f1</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-11">Returns<a class="anchor" aria-label="anchor" href="#returns-11"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-11">Examples<a class="anchor" aria-label="anchor" href="#examples-11"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$variant_label()

# set the parameter
q$variant_label(c("r1i1p1f1", "r1i2p1f1"))

# negate the constraints
q$variant_label(!c("r1i1p1f1", "r1i2p1f1"))

# remove the parameter
q$variant_label(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-nominal_resolution"></a><div class="section">
<h3 id="method-nominal-resolution-">Method <code>nominal_resolution()</code><a class="anchor" aria-label="anchor" href="#method-nominal-resolution-"></a></h3>
<p>Get or set the <code>nominal_resolution</code> facet parameter.</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">nominal_resolution</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$nominal_resolution(!c("50 km", "1x1 degree"))</code> searches for all <code>nominal_resolution</code>s except for <code>50 km</code> and <code>1x1 degree</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-12">Returns<a class="anchor" aria-label="anchor" href="#returns-12"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-12">Examples<a class="anchor" aria-label="anchor" href="#examples-12"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$nominal_resolution()

# set the parameter
q$nominal_resolution(c("100 km", "1x1 degree"))

# negate the constraints
q$nominal_resolution(!c("100 km", "1x1 degree"))

# remove the parameter
q$nominal_resolution(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-data_node"></a><div class="section">
<h3 id="method-data-node-">Method <code>data_node()</code><a class="anchor" aria-label="anchor" href="#method-data-node-"></a></h3>
<p>Get or set the <code>data_node</code> parameter.</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">data_node</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The  parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.  Note that you can put a preceding <code>!</code> to negate the facet constraints. For example, <code>$data_node(!c("cmip.bcc.cma.cn", "esg.camscma.cn"))</code> searches for all <code>data_node</code>s except for <code>cmip.bcc.cma.cn</code> and <code>esg.camscma.cn</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-13">Returns<a class="anchor" aria-label="anchor" href="#returns-13"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-13">Examples<a class="anchor" aria-label="anchor" href="#examples-13"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$data_node()

# set the parameter
q$data_node("esg.lasg.ac.cn")

# negate the constraints
q$data_node(!"esg.lasg.ac.cn")

# remove the parameter
q$data_node(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-facets"></a><div class="section">
<h3 id="method-facets-">Method <code>facets()</code><a class="anchor" aria-label="anchor" href="#method-facets-"></a></h3>
<p>Get or set the <code>facets</code> parameter for facet counting query.</p>
<p>Note that <code>$facets()</code> only affects
<a href="#method-EsgfQuery-count"><code>$count()</code></a>
method when sending a query of facet counting.</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">facets</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>. The special notation <code>"*"</code> can be used to indicate that all available facets should be considered.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-14">Returns<a class="anchor" aria-label="anchor" href="#returns-14"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-14">Examples<a class="anchor" aria-label="anchor" href="#examples-14"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$facets()

# set the facets
q$facets(c("activity_id", "source_id"))

# use all available facets
q$facets("*")
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-fields"></a><div class="section">
<h3 id="method-fields-">Method <code>fields()</code><a class="anchor" aria-label="anchor" href="#method-fields-"></a></h3>
<p>Get or set the <code>fields</code> parameter.</p>
<p>By default, all available metadata fields are returned for each
query. <code>$facets()</code> can be used to limit the number of fields returned
in the query response.</p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">fields</span><span class="op">(</span>value <span class="op">=</span> <span class="st">"*"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>"*"</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>. The special notation <code>"*"</code> can be used to indicate that all available fields should be considered.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-15">Returns<a class="anchor" aria-label="anchor" href="#returns-15"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-15">Examples<a class="anchor" aria-label="anchor" href="#examples-15"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$fields()

# set the fields
q$fields(c("activity_id", "source_id"))

# use all available fields
q$fields("*")

# remove the parameter
# act the same as above because the default `fields` in ESGF search
# services is `*` if `fields` is not specified
q$fields(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-shards"></a><div class="section">
<h3 id="method-shards-">Method <code>shards()</code><a class="anchor" aria-label="anchor" href="#method-shards-"></a></h3>
<p>Get or set the <code>shards</code> parameter.</p>
<p>By default, a distributed query targets all ESGF Nodes. <code>$shards()</code>
can be used to execute a distributed search that targets only one or
more specific nodes.</p>
<p>All available shards can be retrieved using
<a href="#method-EsgfQuery-list_all_shards"><code>$list_all_shards()</code></a>
method.</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">shards</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A character vector or <code>NULL</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-16">Returns<a class="anchor" aria-label="anchor" href="#returns-16"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-16">Examples<a class="anchor" aria-label="anchor" href="#examples-16"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$shards()

# set the parameter
q$shards("localhost:8983/solr/datasets")

# negate the constraints
q$shards(!"localhost:8983/solr/datasets")

# only applicable for distributed queries
q$distrib(FALSE)$shards("localhost:8983/solr/datasets") # Error

# remove the parameter
q$shards(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-replica"></a><div class="section">
<h3 id="method-replica-">Method <code>replica()</code><a class="anchor" aria-label="anchor" href="#method-replica-"></a></h3>
<p>Get or set the <code>replica</code> parameter.</p>
<p>By default, a query returns all records (masters and replicas)
matching the search criteria, i.e. <code>$replica(NULL)</code>.
To return only master records, use <code>$replica(FALSE)</code>; to return only
replicas, use <code>$replica(TRUE)</code>.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">replica</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>NULL</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A flag or <code>NULL</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-17">Returns<a class="anchor" aria-label="anchor" href="#returns-17"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-17">Examples<a class="anchor" aria-label="anchor" href="#examples-17"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$replica()

# set the parameter
q$replica(TRUE)

# remove the parameter
q$replica(NULL)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-latest"></a><div class="section">
<h3 id="method-latest-">Method <code>latest()</code><a class="anchor" aria-label="anchor" href="#method-latest-"></a></h3>
<p>Get or set the <code>latest</code> parameter.</p>
<p>By default, a query to the ESGF search services returns only the very
last, up-to-date version of the matching records, i.e.
<code>$latest(TRUE)</code>. You can use <code>$latest(FALSE)</code> to return all versions.</p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">latest</span><span class="op">(</span>value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>TRUE</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A flag.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-18">Returns<a class="anchor" aria-label="anchor" href="#returns-18"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-18">Examples<a class="anchor" aria-label="anchor" href="#examples-18"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$latest()

# set the parameter
q$latest(TRUE)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-type"></a><div class="section">
<h3 id="method-type-">Method <code>type()</code><a class="anchor" aria-label="anchor" href="#method-type-"></a></h3>
<p>Get or set the <code>type</code> parameter.</p>
<p>There are three types in total: <code>Dataset</code>, <code>File</code> or <code>Aggregation</code>.</p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">type</span><span class="op">(</span>value <span class="op">=</span> <span class="st">"Dataset"</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-16">Arguments<a class="anchor" aria-label="anchor" href="#arguments-16"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>"Dataset"</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A string.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-19">Returns<a class="anchor" aria-label="anchor" href="#returns-19"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-19">Examples<a class="anchor" aria-label="anchor" href="#examples-19"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$type()

# set the parameter
q$type("Dataset")
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-limit"></a><div class="section">
<h3 id="method-limit-">Method <code>limit()</code><a class="anchor" aria-label="anchor" href="#method-limit-"></a></h3>
<p>Get or set the <code>limit</code> parameter.</p>
<p><code>$limit()</code> can be used to limit the number of records to return.
Note that the maximum number of records to return per query for ESGF
search services is 10,000. A warning is issued if input value is
greater than that. In this case, <code>limit</code> will be reset to 10,000.</p><div class="section">
<h4 id="usage-20">Usage<a class="anchor" aria-label="anchor" href="#usage-20"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">limit</span><span class="op">(</span>value <span class="op">=</span> <span class="fl">10L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-17">Arguments<a class="anchor" aria-label="anchor" href="#arguments-17"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>10</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>An integer.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-20">Returns<a class="anchor" aria-label="anchor" href="#returns-20"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-20">Examples<a class="anchor" aria-label="anchor" href="#examples-20"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$limit()

# set the parameter
q$limit(10L)

# `limit` is reset to 10,000 if input is greater than that
q$limit(10000L) # warning
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-offset"></a><div class="section">
<h3 id="method-offset-">Method <code><a href="https://rdrr.io/r/stats/offset.html" class="external-link">offset()</a></code><a class="anchor" aria-label="anchor" href="#method-offset-"></a></h3>
<p>Get or set the <code>offset</code> parameter.</p>
<p>If the query returns records that exceed the
<a href="#method-EsgfQuery-limit"><code>limit</code></a> number,
<code>$offset()</code> can be used to paginate through the available results.</p><div class="section">
<h4 id="usage-21">Usage<a class="anchor" aria-label="anchor" href="#usage-21"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">offset</span><span class="op">(</span>value <span class="op">=</span> <span class="fl">0L</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-18">Arguments<a class="anchor" aria-label="anchor" href="#arguments-18"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>0</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>An integer.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-21">Returns<a class="anchor" aria-label="anchor" href="#returns-21"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-21">Examples<a class="anchor" aria-label="anchor" href="#examples-21"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$offset()

# set the parameter
q$offset(0L)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-distrib"></a><div class="section">
<h3 id="method-distrib-">Method <code>distrib()</code><a class="anchor" aria-label="anchor" href="#method-distrib-"></a></h3>
<p>Get or set the <code>distrib</code> facet</p>
<p>By default, the query is sent to all ESGF Nodes, i.e.
<code>$distrib(TRUE)</code>.
<code>$distrib(FALSE)</code> can be used to execute the query only on the
target node.</p><div class="section">
<h4 id="usage-22">Usage<a class="anchor" aria-label="anchor" href="#usage-22"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">distrib</span><span class="op">(</span>value <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-19">Arguments<a class="anchor" aria-label="anchor" href="#arguments-19"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>The facet parameter value. Default: <code>TRUE</code>.
There are two options:</p><ul><li><p>If <code>value</code> is not given, current value is returned.</p></li>
<li><p>A flag.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-22">Returns<a class="anchor" aria-label="anchor" href="#returns-22"></a></h4>

<ul><li><p>If <code>value</code> is given, the modified <code>EsgfQuery</code> object.</p></li>
<li><p>Otherwise, an <code>EsgfQueryParam</code> object which is essentially a list of three elements:</p><ul><li><p><code>value</code>: input values.</p></li>
<li><p><code>negate</code>: Whether there is a preceding <code>!</code>.</p></li>
<li><p><code>name</code>: Parameter name.</p></li>
</ul></li>
</ul></div>
<div class="section">
<h4 id="examples-22">Examples<a class="anchor" aria-label="anchor" href="#examples-22"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current value
q$distrib()

# set the parameter
q$distrib(TRUE)
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-params"></a><div class="section">
<h3 id="method-params-">Method <code>params()</code><a class="anchor" aria-label="anchor" href="#method-params-"></a></h3>
<p>Get or set other parameters.</p>
<p><code>$params()</code> can be used to specify other parameters that do not have
a dedicated method, e.g. <code>version</code>, <code>master_id</code>, etc. It can also be
used to overwrite existing parameter values specified using methods
like <a href="#method-EsgfQuery-activity_id"><code>$activity_id()</code></a>.</p><div class="section">
<h4 id="usage-23">Usage<a class="anchor" aria-label="anchor" href="#usage-23"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-20">Arguments<a class="anchor" aria-label="anchor" href="#arguments-20"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>Parameter values to set. There are three options:</p><ul><li><p>If not given, existing parameters that do not have a dedicated
method are returned.</p></li>
<li><p>If <code>NULL</code>, all existing parameters that do not have a dedicated
method are removed.</p></li>
<li><p>A named vector, e.g. <code>$params(score = 1, table_id = "day")</code> will
set <code>score</code> to <code>1</code> and <code>table_id</code> to <code>day</code>.
The <code>!</code> notation can still be used to negate the constraints, e.g.
<code>$params(table_id = !c("3hr", "day"))</code> searches for all <code>table_id</code>
except for <code>3hr</code> and <code>day</code>.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-23">Returns<a class="anchor" aria-label="anchor" href="#returns-23"></a></h4>

<ul><li><p>If parameters are specified, the modified <code>EsgfQuery</code> object,
invisibly.</p></li>
<li><p>Otherwise, an empty list for <code>$params(NULL)</code> or a list of
<code>EsgfQueryParam</code> objects.</p></li>
</ul></div>
<div class="section">
<h4 id="examples-23">Examples<a class="anchor" aria-label="anchor" href="#examples-23"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get current values
# default is an empty list (`list()`)
q$params()

# set the parameter
q$params(table_id = c("3hr", "day"), member_id = "00")
q$params()

# reset existing parameters
q$frequency("day")
q$params(frequency = "mon")
q$frequency() # frequency value has been changed using $params()

# negating the constraints is also supported
q$params(table_id = !c("3hr", "day"))

# use NULL to remove all parameters
q$params(NULL)$params()
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-url"></a><div class="section">
<h3 id="method-url-">Method <code><a href="https://rdrr.io/r/base/connections.html" class="external-link">url()</a></code><a class="anchor" aria-label="anchor" href="#method-url-"></a></h3>
<p>Get the URL of actual query or wget script</p><div class="section">
<h4 id="usage-24">Usage<a class="anchor" aria-label="anchor" href="#usage-24"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">url</span><span class="op">(</span>wget <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-21">Arguments<a class="anchor" aria-label="anchor" href="#arguments-21"></a></h4>
<p></p><div class="arguments"><dl><dt><code>wget</code></dt>
<dd><p>Whether to return the URL of the wget script that can be
used to download all files matching the given constraints.
Default: <code>FALSE</code>.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-24">Returns<a class="anchor" aria-label="anchor" href="#returns-24"></a></h4>
<p>A single string.</p>
</div>
<div class="section">
<h4 id="examples-24">Examples<a class="anchor" aria-label="anchor" href="#examples-24"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$url()

# get the wget script URL
q$url(wget = TRUE)

# You can download the wget script using the URL directly. For
# example, the code below downloads the script and save it as
# 'wget.sh' in R's temporary folder:
download.file(q$url(TRUE), file.path(tempdir(), "wget.sh"), mode = "wb")

}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-count"></a><div class="section">
<h3 id="method-count-">Method <code>count()</code><a class="anchor" aria-label="anchor" href="#method-count-"></a></h3>
<p>Send a query of facet counting and fetch the results</p><div class="section">
<h4 id="usage-25">Usage<a class="anchor" aria-label="anchor" href="#usage-25"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">count</span><span class="op">(</span>facets <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-22">Arguments<a class="anchor" aria-label="anchor" href="#arguments-22"></a></h4>
<p></p><div class="arguments"><dl><dt><code>facets</code></dt>
<dd><p><code>NULL</code>, a flag or a character vector. There are three
options:</p><ul><li><p>If <code>NULL</code> or <code>FALSE</code>, only the total number of matched records is
returned.</p></li>
<li><p>If <code>TRUE</code>, the value of <a href="#method-EsgfQuery-facets"><code>$facets()</code></a>
is used to limit the facets. This is the default value.</p></li>
<li><p>If a character vector, it is used to limit the facets.</p></li>
</ul></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-25">Returns<a class="anchor" aria-label="anchor" href="#returns-25"></a></h4>

<ul><li><p>If <code>facets</code> equals <code>NULL</code> or <code>FALSE</code>, or <code>$facets()</code> returns <code>NULL</code>,
an integer.</p></li>
<li><p>Otherwise, a named list with the first element always being <code>total</code>
which is the total number of matched records. Other elements have
the same length as input facets and are all named integer vectors.</p></li>
</ul></div>
<div class="section">
<h4 id="examples-25">Examples<a class="anchor" aria-label="anchor" href="#examples-25"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
# get the total number of matched records
q$count(NULL) # or q$count(facets = FALSE)

# count records for specific facets
q$facets(c("activity_id", "source_id"))$count()

# same as above
q$count(facets = c("activity_id", "source_id"))
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-collect"></a><div class="section">
<h3 id="method-collect-">Method <code>collect()</code><a class="anchor" aria-label="anchor" href="#method-collect-"></a></h3>
<p>Send the actual query and fetch the results</p>
<p><code>$collect()</code> sends the actual query to the ESGF search services and
returns the results in a <a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table</a>. The columns depend
on the value of query type and <code>fields</code> parameter.</p><div class="section">
<h4 id="usage-26">Usage<a class="anchor" aria-label="anchor" href="#usage-26"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">collect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-26">Returns<a class="anchor" aria-label="anchor" href="#returns-26"></a></h4>
<p>A <a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a>.</p>
</div>
<div class="section">
<h4 id="examples-26">Examples<a class="anchor" aria-label="anchor" href="#examples-26"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$fields("source_id")
q$collect()
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-response"></a><div class="section">
<h3 id="method-response-">Method <code>response()</code><a class="anchor" aria-label="anchor" href="#method-response-"></a></h3>
<p>Get the response of last sent query</p>
<p>The response of the last sent query is always stored internally and
can be retrieved using <code>$response()</code>. It is a named list generated
from the JSON response using <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html" class="external-link">jsonlite::fromJSON()</a></code>.</p><div class="section">
<h4 id="usage-27">Usage<a class="anchor" aria-label="anchor" href="#usage-27"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">response</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-27">Returns<a class="anchor" aria-label="anchor" href="#returns-27"></a></h4>
<p>A named list.</p>
</div>
<div class="section">
<h4 id="examples-27">Examples<a class="anchor" aria-label="anchor" href="#examples-27"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$response()
}
</code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-EsgfQuery-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Print a summary of the current <code>EsgfQuery</code> object</p>
<p><code>$print()</code> gives the summary of current <code>EsgfQuery</code> object including
the host URL, the built time of facet cache and all query parameters.</p><div class="section">
<h4 id="usage-28">Usage<a class="anchor" aria-label="anchor" href="#usage-28"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-28">Returns<a class="anchor" aria-label="anchor" href="#returns-28"></a></h4>
<p>The <code>EsgfQuery</code> object itself, invisibly.</p>
</div>
<div class="section">
<h4 id="examples-28">Examples<a class="anchor" aria-label="anchor" href="#examples-28"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code>\dontrun{
q$print()
}
</code></pre></div><p></p></div>
</div>


</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$new`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span> <span class="op">&lt;-</span> <span class="va">EsgfQuery</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>host <span class="op">=</span> <span class="st">"https://esgf-node.llnl.gov/esg-search"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">q</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$build_cache`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">build_cache</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$list_all_facets`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">list_all_facets</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$list_all_shards`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">list_all_shards</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$list_all_values`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">list_all_values</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$project`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">project</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">project</span><span class="op">(</span><span class="st">"CMIP6"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the project constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">project</span><span class="op">(</span><span class="op">!</span><span class="st">"CMIP6"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">project</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$activity_id`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">activity_id</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">activity_id</span><span class="op">(</span><span class="st">"ScenarioMIP"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">activity_id</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CFMIP"</span>, <span class="st">"ScenarioMIP"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">activity_id</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$experiment_id`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">experiment_id</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">experiment_id</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssp126"</span>, <span class="st">"ssp585"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">experiment_id</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ssp126"</span>, <span class="st">"ssp585"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">experiment_id</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$source_id`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">source_id</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">source_id</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BCC-CSM2-MR"</span>, <span class="st">"CESM2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">source_id</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BCC-CSM2-MR"</span>, <span class="st">"CESM2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">source_id</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$variable_id`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variable_id</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variable_id</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tas"</span>, <span class="st">"pr"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variable_id</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tas"</span>, <span class="st">"pr"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variable_id</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$frequency`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">frequency</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">frequency</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1hr"</span>, <span class="st">"day"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">frequency</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1hr"</span>, <span class="st">"day"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">frequency</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$variant_label`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variant_label</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variant_label</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"r1i1p1f1"</span>, <span class="st">"r1i2p1f1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variant_label</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"r1i1p1f1"</span>, <span class="st">"r1i2p1f1"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">variant_label</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$nominal_resolution`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">nominal_resolution</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">nominal_resolution</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"100 km"</span>, <span class="st">"1x1 degree"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">nominal_resolution</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"100 km"</span>, <span class="st">"1x1 degree"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">nominal_resolution</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$data_node`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">data_node</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">data_node</span><span class="op">(</span><span class="st">"esg.lasg.ac.cn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">data_node</span><span class="op">(</span><span class="op">!</span><span class="st">"esg.lasg.ac.cn"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">data_node</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$facets`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">facets</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the facets</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">facets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"activity_id"</span>, <span class="st">"source_id"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use all available facets</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">facets</span><span class="op">(</span><span class="st">"*"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$fields`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">fields</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the fields</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">fields</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"activity_id"</span>, <span class="st">"source_id"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use all available fields</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">fields</span><span class="op">(</span><span class="st">"*"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="co"># act the same as above because the default `fields` in ESGF search</span></span></span>
<span class="r-in"><span><span class="co"># services is `*` if `fields` is not specified</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">fields</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$shards`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">shards</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">shards</span><span class="op">(</span><span class="st">"localhost:8983/solr/datasets"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negate the constraints</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">shards</span><span class="op">(</span><span class="op">!</span><span class="st">"localhost:8983/solr/datasets"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># only applicable for distributed queries</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">distrib</span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span><span class="op">$</span><span class="fu">shards</span><span class="op">(</span><span class="st">"localhost:8983/solr/datasets"</span><span class="op">)</span> <span class="co"># Error</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">shards</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$replica`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">replica</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">replica</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># remove the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">replica</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$latest`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">latest</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">latest</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$type`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">type</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">type</span><span class="op">(</span><span class="st">"Dataset"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$limit`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">limit</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">limit</span><span class="op">(</span><span class="fl">10L</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `limit` is reset to 10,000 if input is greater than that</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">limit</span><span class="op">(</span><span class="fl">10000L</span><span class="op">)</span> <span class="co"># warning</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$offset`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">offset</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">offset</span><span class="op">(</span><span class="fl">0L</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$distrib`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current value</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">distrib</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">distrib</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$params`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get current values</span></span></span>
<span class="r-in"><span><span class="co"># default is an empty list (`list()`)</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># set the parameter</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span>table_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3hr"</span>, <span class="st">"day"</span><span class="op">)</span>, member_id <span class="op">=</span> <span class="st">"00"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reset existing parameters</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">frequency</span><span class="op">(</span><span class="st">"day"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span>frequency <span class="op">=</span> <span class="st">"mon"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">frequency</span><span class="op">(</span><span class="op">)</span> <span class="co"># frequency value has been changed using $params()</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># negating the constraints is also supported</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span>table_id <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3hr"</span>, <span class="st">"day"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use NULL to remove all parameters</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span><span class="op">$</span><span class="fu">params</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$url`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">url</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get the wget script URL</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">url</span><span class="op">(</span>wget <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can download the wget script using the URL directly. For</span></span></span>
<span class="r-in"><span><span class="co"># example, the code below downloads the script and save it as</span></span></span>
<span class="r-in"><span><span class="co"># 'wget.sh' in R's temporary folder:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">download.file</a></span><span class="op">(</span><span class="va">q</span><span class="op">$</span><span class="fu">url</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"wget.sh"</span><span class="op">)</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$count`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># get the total number of matched records</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">count</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span> <span class="co"># or q$count(facets = FALSE)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># count records for specific facets</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">facets</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"activity_id"</span>, <span class="st">"source_id"</span><span class="op">)</span><span class="op">)</span><span class="op">$</span><span class="fu">count</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># same as above</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">count</span><span class="op">(</span>facets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"activity_id"</span>, <span class="st">"source_id"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$collect`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">fields</span><span class="op">(</span><span class="st">"source_id"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">collect</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$response`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">response</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `EsgfQuery$print`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">q</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/hongyuanjia" class="external-link">Hongyuan Jia</a>, <a href="https://github.com/adChong" class="external-link">Adrian Chong</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

